---
import BlogLayout from "../../layouts/BlogLayout.astro";

export const prerender = false;
import { getEntry } from "astro:content";
import page_404 from "../404.astro";

const {slug} = Astro.params;

let headings, Content;

const entry = await getEntry('blog', `${slug}`);
if (entry) {
    const post = await entry.render();
    headings = post.headings;
    Content = post.Content;
} else {
    headings = [{text: 'Page not found'}]
    Content = page_404
    return Astro.redirect("/404")
}
---
<BlogLayout title={headings[0].text}>
    <main class="w-[70%] md:w-[90%] mx-auto">
        <article>
            <Content />
        </article>
    </main>
</BlogLayout>